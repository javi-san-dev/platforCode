---
import menu from '../assets/menu.svg'
import Image from 'astro/components/Image.astro'
import close from '../assets/close.svg'
import downloadIcon from '../assets/download.svg'
import logo from '../assets/logo.webp'
---

<header class="animate-fade-in-3 fixed z-10 flex w-[100vw] justify-center p-2 px-6 z-20" id="headerMenu">
    <div class="flex w-full max-w-[1200px] items-center">
        <a href="/" class="absolute"><Image src={logo} alt="logo" class="w-[160px]" /></a>
        <nav class="text-md m-auto hidden gap-3 font-medium text-neutral-400 lg:flex">
            <a href="/#about" class="cursor-pointer rounded-lg px-3 py-2 hover:scale-110">About</a>
            <a href="/#content" class="cursor-pointer rounded-lg px-3 py-2 hover:bg-neutral-900">Content</a>
            <a href="/pricing/#faq" class="cursor-pointer rounded-lg px-3 py-2 hover:bg-neutral-900">Faq</a>
            <a href="/pricing" class="cursor-pointer rounded-lg px-3 py-2 hover:bg-neutral-900">Pricing</a>
        </nav>
        <nav class="hidden gap-3 lg:flex">
            <div class="backgroundStyle rounded-full">
                <button class="font-base cursor-pointer rounded-full bg-black px-3 py-2 text-white hover:bg-neutral-900">Try Web Demo</button>
            </div>
            <button class="flex cursor-pointer items-center rounded-full bg-white px-3 py-1 text-sm font-medium hover:bg-neutral-100"> <Image class="mr-2 rounded-xl text-black" src={downloadIcon} alt="landing image" width="22" height="22" />Download</button>
        </nav>
        <nav class="ml-auto inline cursor-pointer rounded-md border border-neutral-800 lg:hidden" id="toggle-menu-button">
            <Image alt="menu icon" src={menu} width={40} height={40} id="menuImage" />
            <Image alt="close icon" src={close} width={40} height={40} id="closeImage" style={{ display: 'none' }} />
        </nav>
        <nav class="absolute top-14 left-0 hidden w-full flex-col bg-black px-3 text-lg text-neutral-400 lg:hidden" id="toggle-menu">
            <div class="flex flex-col border-t border-neutral-800 pt-5">
                <div class="backgroundStyle rounded-xl">
                    <button class="w-full cursor-pointer rounded-xl bg-black px-3 py-3 font-light text-white hover:bg-neutral-900">Try Web Demo</button>
                </div>
                <button class="mt-5 mb-5 flex cursor-pointer justify-center rounded-xl bg-white px-3 py-3 text-black hover:bg-neutral-100"> <Image class="mr-2 rounded-xl text-black" src={downloadIcon} alt="landing image" width="22" height="22" />Download</button>
            </div>

            <div class="flex flex-col border-b border-neutral-800 pb-5">
                <a href="/#about" class="cursor-pointer rounded-lg px-3 py-3 hover:bg-neutral-900 hover:text-white">About</a>
                <a href="/#content" class="cursor-pointer rounded-lg px-3 py-3 hover:bg-neutral-900 hover:text-white">Content</a>
                <a href="/pricing/#faq" class="cursor-pointer rounded-lg px-3 py-3 hover:bg-neutral-900 hover:text-white">Faq</a>
                <a href="/pricing/" class="cursor-pointer rounded-lg px-3 py-3 hover:bg-neutral-900 hover:text-white">Pricing</a>
            </div>
        </nav>
    </div>
</header>

<script>
    const menu = document.getElementById('headerMenu')!
    const menuToggleButton = document.getElementById('toggle-menu-button')!
    const menuToggle = document.getElementById('toggle-menu')!

    const closeImage = document.getElementById('closeImage')!
    const menuImage = document.getElementById('menuImage')!

    setMenuStyle()

    window.addEventListener('scroll', () => {
        setMenuStyle()
    })

    function setMenuStyle() {
        if (window.scrollY > 80) {
            menu.style.backgroundColor = 'black'
            menu.style.borderBottom = '1px solid oklch(0.269 0 0)'
        } else {
            menu.style.backgroundColor = 'transparent'
            menu.style.borderBottom = 'none'
        }
    }

    menuToggleButton.addEventListener('click', () => {
        const isMenuDisplayed = menuToggle.classList.contains('flex')
        if (!isMenuDisplayed) {
            menuToggle.classList.add('flex')
            menuToggle.classList.remove('hidden')
        } else {
            menuToggle.classList.add('hidden')
            menuToggle.classList.remove('flex')
        }

        if (closeImage.style.display === 'none') {
            closeImage.style.display = 'block'
            menuImage.style.display = 'none'
        } else {
            closeImage.style.display = 'none'
            menuImage.style.display = 'block'
        }
    })
</script>
